# ==============================================================================
# Matrix Hub â€” Dual environment template for local dev and production
#
# - Settings for LOCAL DEVELOPMENT are UNCOMMENTED by default.
# - Settings for PRODUCTION are COMMENTED OUT.
# ==============================================================================

# -------------------------
# Server
# -------------------------
APP_NAME=matrix-hub
HOST=0.0.0.0
PORT=443
LOG_LEVEL=INFO

# For local, a token can be left blank. For production, you MUST set one.
API_TOKEN=
# API_TOKEN="change-me-to-a-very-strong-random-secret"

# -------------------------
# Database
# -------------------------
# Default: SQLite for a quick local start
DATABASE_URL=sqlite+pysqlite:///./data/catalog.sqlite
# Production: PostgreSQL connection string
# DATABASE_URL="postgresql+psycopg://matrix:matrix@<SERVER>:5432/postgres"

# For local SQLite dev only. Production must use Alembic migrations.
INIT_DB=true
# INIT_DB=false

# -------------------------
# Search & ranking
# -------------------------
# Local defaults require no extra services.
SEARCH_LEXICAL_BACKEND=none
SEARCH_VECTOR_BACKEND=none
# Production recommendations (require PostgreSQL extensions)
# SEARCH_LEXICAL_BACKEND=pgtrgm
# SEARCH_VECTOR_BACKEND=pgvector

SEARCH_HYBRID_WEIGHTS=sem:0.6,lex:0.4,rec:0.1,q:0.1
RAG_ENABLED=false
EMBED_MODEL=sentence-transformers/all-MiniLM-L6-v2

# -------------------------
# Catalog ingestion
# -------------------------
CATALOG_REMOTES=["https://raw.githubusercontent.com/agent-matrix/catalog/main/index.json"]
INGEST_INTERVAL_MIN=15

# -------------------------
# MCP Gateway integration
# -------------------------
# Local dev defaults
MCP_GATEWAY_URL=http://127.0.0.1:4444
MCP_GATEWAY_TOKEN=supersecret
# Production values (update if used)
# MCP_GATEWAY_URL=
# MCP_GATEWAY_TOKEN=

# -------------------------
# Misc
# -------------------------
PIP_INDEX_URL=
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1

# ==============================================================================
# LOCAL DEVELOPMENT OVERRIDES
# These are used for local dev and Docker scripts
# ==============================================================================
POSTGRES_USER=matrix
POSTGRES_PASSWORD=matrix
POSTGRES_DB=matrixhub

LOG_LEVEL=DEBUG
SQL_ECHO=1

# --- Local URLs ---
HUB_BASE=http://0.0.0.0:443
SITE_URL=http://localhost:3000

# --- Production URLs (for reference) ---
# HUB_BASE=https://api.matrixhub.io
# SITE_URL=https://matrixhub.io

DERIVE_TOOLS_FROM_MCP=true