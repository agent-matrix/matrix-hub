# ==============================================================================
# Alembic Configuration File
#
# This file configures Alembic, the database migration tool for SQLAlchemy.
# ==============================================================================

[alembic]
# This is the main Alembic configuration section.

# Path to the directory where your migration scripts are located.
# This should point to the 'alembic' directory in your project root.
script_location = alembic

# Template for new migration file names.
# e.g., "d48a2a2a7d2_add_user_table.py"
file_template = %%(rev)s_%%(slug)s

# The database URL. We're explicitly pointing at your Hub DB here:
# ------------------------------------------------------------------------------
sqlalchemy.url = sqlite:///./data/catalog.sqlite
# ------------------------------------------------------------------------------


# ==============================================================================
# Logging Configuration
#
# This section configures logging for Alembic's console output.
# It helps in debugging migration runs.
# ==============================================================================

[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

# --- Logger Definitions ---

[logger_root]
# General logger for all other messages.
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
# Logger for messages from SQLAlchemy's engine.
# Set to WARN to avoid overly verbose output of every SQL statement.
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
# Logger for Alembic's own messages.
# Set to INFO to see the status of migration runs.
level = INFO
handlers =
qualname = alembic

# --- Handler Definitions ---

[handler_console]
# Configures the console output handler.
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

# --- Formatter Definitions ---

[formatter_generic]
# Defines the format for log messages.
# e.g., "INFO  [alembic.runtime.migration] Running upgrade -> abc12345"
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S
