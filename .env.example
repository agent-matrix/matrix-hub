# ==============================================================================
# Matrix Hub â€” environment for local dev (uvicorn / docker compose)
# Copy to ".env" and adjust as needed.
# ==============================================================================

# -------------------------
# Server
# -------------------------
APP_NAME=matrix-hub
HOST=0.0.0.0
PORT=7300
LOG_LEVEL=INFO

# Optional admin API token for protected endpoints (leave blank to disable auth)
API_TOKEN=

# -------------------------
# Database
# For local single-file mode use SQLite (explicit driver recommended):
#   sqlite+pysqlite:///./data/catalog.sqlite
# For Postgres (example):
#   postgresql+psycopg://user:pass@localhost:5432/matrixhub
# -------------------------
DATABASE_URL=sqlite+pysqlite:///./data/catalog.sqlite

# Dev-only convenience: if true and using SQLite, create tables on startup
# (Production: use Alembic migrations instead)
INIT_DB=true

# -------------------------
# Search & ranking (simple defaults; can be extended later)
# If you use Postgres + pg_trgm, set SEARCH_LEXICAL_BACKEND=pgtrgm
# For SQLite/local dev, keep 'none' to avoid pg_trgm expectations.
# -------------------------
SEARCH_LEXICAL_BACKEND=none          # options: pgtrgm | none
SEARCH_VECTOR_BACKEND=none           # options: pgvector | milvus | none
SEARCH_HYBRID_WEIGHTS=sem:0.6,lex:0.4,rec:0.1,q:0.1
RAG_ENABLED=false
EMBED_MODEL=sentence-transformers/all-MiniLM-L6-v2

# -------------------------
# Catalog ingestion
# Comma-separated list or JSON array of remote index.json URLs
# -------------------------
CATALOG_REMOTES=["https://raw.githubusercontent.com/agent-matrix/catalog/main/index.json"]

# Polling interval in minutes (ingestor scheduler)
INGEST_INTERVAL_MIN=15

# -------------------------
# MCP Gateway integration
# -------------------------
# If Matrix Hub runs on the same machine as gateway:
MCP_GATEWAY_URL=http://127.0.0.1:4444
# If Matrix Hub runs on a different machine/container:
# MCP_GATEWAY_URL=http://<gateway-server-ip>:4444
MCP_GATEWAY_TOKEN=supersecret

# -------------------------
# Misc
# -------------------------
PIP_INDEX_URL=
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1
